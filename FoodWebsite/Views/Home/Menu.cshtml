@model List<FoodWebsite.Models.Product>
<link rel="stylesheet" href="/css/style.css" />
<section class="menu" id="menu">
    <h1 class="heading">our <span>menu</span></h1>
    <div class="box-container">
        @foreach (var product in Model)
        {
            <div class="box">
                <div class="box-head">
                    <img src="@product.ImageUrl" alt="menu" />
                    <span class="menu-category">@product.Category</span>
                    <h3>@product.Name</h3>
                    <div class="price">$@product.Price</div>
                </div>
                <div class="box-bottom">
                    <a href="#" class="btn" onclick="addToCart(@product.Id)">Add to Cart</a>
                </div>
            </div>
        }
    </div>
</section>
<script src="/js/script.js"></script>
<script>
    async function addToCart(productId) {
        const response = await fetch('/api/Cart', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ ProductId: productId, Quantity: 1 })
        });
        if (response.ok) {
            window.location.reload();
        } else {
            alert('Sepete eklenemedi. Giriş yapın.');
        }
    }
</script>