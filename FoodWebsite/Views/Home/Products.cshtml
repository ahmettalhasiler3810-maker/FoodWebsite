@model List<FoodWebsite.Models.Product>
<link rel="stylesheet" href="/css/style.css" />
<section class="products" id="products">
    <h1 class="heading">our <span>products</span></h1>
    <div class="box-container">
        @foreach (var product in Model)
        {
            <div class="box">
                <div class="box-head">
                    <span class="title">@product.Category</span>
                    <a href="#" class="name">@product.Name</a>
                </div>
                <div class="image">
                    <img src="@product.ImageUrl" alt="" />
                </div>
                <div class="box-bottom">
                    <div class="info">
                        <b class="price">$@product.Price</b>
                        <span class="amount">110gr / 300 Cal</span>
                    </div>
                    <div class="product-btn">
                        <a href="#" onclick="addToCart(@product.Id)">
                            <i class="fas fa-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
<script src="/js/script.js"></script>
<script>
    async function addToCart(productId) {
        const response = await fetch('/api/Cart', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ ProductId: productId, Quantity: 1 })
        });
        if (response.ok) {
            window.location.reload();
        } else {
            alert('Sepete eklenemedi. Giriş yapın.');
        }
    }
</script>